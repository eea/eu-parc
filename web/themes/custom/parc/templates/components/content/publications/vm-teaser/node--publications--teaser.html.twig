{#
/**
 * @file
 * Parc override to display a node.
 */
#}

{{ attach_library('edwt/collapse') }}
{{ attach_library('parc/n--publications-teaser') }}
{% set collpaseID = 'parc--publications-' ~ node.id() %}


{%
  set classes = [
    'node',
    'node--' ~ node.bundle|clean_class,
    view_mode ? 'node--' ~ node.bundle|clean_class ~ '--' ~ view_mode|clean_class,
  ]
%}

{% set c_text = content.field_text_color.0 ? content.field_text_color.0['#markup'] : '#008475' %}
{% set c_bg = content.field_background_color.0 ? content.field_background_color.0['#markup'] : '#b0e6df' %}
<article{{attributes.addClass(classes).setAttribute('style','--cs--item-c:'~c_text~';--cs--item-bg:'~c_bg)}}>
  {{ title_prefix }}
  {{ title_suffix }}
  <div id="publication-anchor-{{ node.id() }}"></div>
  <div class="news-container">
    <div class="row">
      <div class="col-auto col-sp-img">
        {% if content.field_cover.0 %}
          {{content.field_cover}}
        {% else %}
          <img src="{{ base_path ~ directory }}/img/sp-default.png" alt="Default scientific publications image"/>
        {% endif %}
      </div>

      <div class="col col-sp-content">
        <a href="{{ content.field_doi_link.0 }}" class="node--title">
          {{- label -}}

          <svg width="9" height="9" viewbox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.79956 1H6.32454C6.96259 1 7.56587 1.57529 7.56587 2.18374L7.56587 5.76558" stroke="#040404" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="4.8999" y1="4.161" x2="1.06066" y2="8.00024" stroke="#040404" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </a>

        <div class="w--btn">
          <button class="btn btn-clear btn-arrow" type="button" data-bs-toggle="collapse" data-bs-target="#{{ collpaseID }}" aria-expanded="false" aria-controls="{{ collpaseID }}">
            <span class="more">
              {{- 'Read more'|t -}}
            </span>

            <span class="less">
              {{- 'Read less'|t -}}
            </span>
          </button>

          <div class="bb"></div>
        </div>
      </div>

      <div class="collapse" id="{{collpaseID}}">
        <div class="collpase-row row">
          <div class="col">
            {{ content.group_dropdown_content }}
            <div class="bb"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</article>
